{% extends "base.html" %}

{% block title %}Ajouter un bien{% endblock %}

{% block content %}
<div class="container">
    <h1 class="mb-4">Ajouter un bien immobilier</h1>
    <form method="POST" enctype="multipart/form-data">
        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="title" class="form-label">Titre</label>
                    <input type="text" class="form-control" id="title" name="title" required>
                </div>
                <div class="mb-3">
                    <label for="type" class="form-label">Type de bien</label>
                    <select class="form-control" id="type" name="type" required>
                        <optgroup label="Résidentiel">
                            <option value="apartment">Appartement</option>
                            <option value="house">Maison</option>
                            <option value="villa">Villa</option>
                            <option value="duplex">Duplex</option>
                            <option value="studio">Studio</option>
                            <option value="riad">Riad</option>
                        </optgroup>
                        <optgroup label="Commercial">
                            <option value="office">Bureau</option>
                            <option value="shop">Local commercial</option>
                            <option value="warehouse">Entrepôt</option>
                            <option value="industrial">Local industriel</option>
                        </optgroup>
                        <optgroup label="Terrain">
                            <option value="land_residential">Terrain résidentiel</option>
                            <option value="land_commercial">Terrain commercial</option>
                            <option value="land_agricultural">Terrain agricole</option>
                        </optgroup>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="transaction_type" class="form-label">Type de transaction</label>
                    <select class="form-control" id="transaction_type" name="transaction_type" required>
                        <option value="sale">Vente</option>
                        <option value="rental">Location</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="price" class="form-label">Prix (DH)</label>
                    <div class="input-group">
                        <input type="number" class="form-control" id="price" name="price" required>
                        <span class="input-group-text rental-period d-none">/ mois</span>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="surface" class="form-label">Surface (m²)</label>
                    <input type="number" class="form-control" id="surface" name="surface" required>
                </div>
                <div class="mb-3">
                    <label for="rooms" class="form-label">Nombre de pièces</label>
                    <input type="number" class="form-control" id="rooms" name="rooms" required>
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="address" class="form-label">Adresse</label>
                    <input type="text" class="form-control" id="address" name="address" required>
                </div>
                <div class="mb-3">
                    <label for="city" class="form-label">Ville</label>
                    <input type="text" class="form-control" id="city" name="city" required>
                </div>
                <div class="mb-3">
                    <label for="postal_code" class="form-label">Code postal</label>
                    <input type="text" class="form-control" id="postal_code" name="postal_code" required>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="latitude" class="form-label">Latitude</label>
                            <input type="number" step="any" class="form-control" id="latitude" name="latitude" required>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="longitude" class="form-label">Longitude</label>
                            <input type="number" step="any" class="form-control" id="longitude" name="longitude" required>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mb-3">
            <label for="description" class="form-label">Description</label>
            <textarea class="form-control" id="description" name="description" rows="4" required></textarea>
        </div>
        
        <div class="mb-3">
            <label class="form-label">Caractéristiques</label>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="features" value="parking" id="feature_parking">
                        <label class="form-check-label" for="feature_parking">Parking</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="features" value="elevator" id="feature_elevator">
                        <label class="form-check-label" for="feature_elevator">Ascenseur</label>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="features" value="balcony" id="feature_balcony">
                        <label class="form-check-label" for="feature_balcony">Balcon</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="features" value="garden" id="feature_garden">
                        <label class="form-check-label" for="feature_garden">Jardin</label>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mb-3">
            <label for="status" class="form-label">Statut</label>
            <select class="form-control" id="status" name="status" required>
                <option value="available">Disponible</option>
                <option value="pending">Sous option</option>
                <option value="sold">Vendu</option>
            </select>
        </div>
        
        <div class="mb-3">
            <label for="images" class="form-label">Images</label>
            <input type="file" class="form-control" id="images" name="images" multiple accept="image/*">
        </div>
        
        <div class="d-grid gap-2">
            <button type="submit" class="btn btn-primary">Ajouter le bien</button>
            <a href="{{ url_for('home') }}" class="btn btn-secondary">Annuler</a>
        </div>
    </form>
</div>

<script>
document.getElementById('transaction_type').addEventListener('change', function() {
    const rentalPeriod = document.querySelector('.rental-period');
    if (this.value === 'rental') {
        rentalPeriod.classList.remove('d-none');
    } else {
        rentalPeriod.classList.add('d-none');
    }
});
</script>
{% endblock %} 